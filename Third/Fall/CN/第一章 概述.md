## 1.1计算机网络与互联网
- 网络提供的最基本服务: 信息传递
- 计算机网络重要功能
	- 连通性connectivity
	- 共享Sharing

> - 互连网（internet）
> 通用名词，泛指在由多个计算机 网络通过路由器互连而成的网络。
> - 互联网（Internet）
> 专用名词，全球最大的一个互连网 。 它由美国阿帕网（ARPANET）发展而成，主要采用TCP/IP协议作为通信的规则。


![互联网](img/第一章%20概述/互联网.png)

### 互联网协议
- 控制消息的发送、接收
- HTTP (Web), streaming video, Skype, TCP, IP, WiFi, 4G, Ethernet

### 互联网标准
- RFC: Request for Comments
- IETF: Internet Engineering Task Force

### 云
1. 云表示的网络已经包含了 和网络相连的计算机。 
2. 云表示的网络里面就只剩下许多路由器和连接这些路由器的链路，把有关的计算机画在云的外面。习惯上，与网络相连的计算机常称为主机 (host)。

***

### 互联网的组成
- 从互联网的工作方式上看，可以划分为两大块： 
	- 边缘部分： 由所有连接在互联网上的主机组成。 这部分是用户直接使用的，用来进行通信（传 送数据、音频或视频）和资源共享。 
	- 核心部分：由大量网络和连接这些网络的路由 器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。
### 1.1.1 互联网的边缘部分

- 处在互联网边缘的部分就是连接在互联网上的所有的主机(hosts)。这些主机又称为端系统 (end systems)。
- 端系统：
	- 请求服务的客户(Client)
	- 提供服务的服务器(Server)
#### 端系统之间通信的含义
> “主机 A 和主机 B 进行通信”实际上是指： “运行在主机 A 上的某个程序和运行在主机 B 上的另一个程序进行通信”。 
> 即“主机 A 的某个进程和主机 B 上的另一个 进程进行通信”。 简称为“计算机之间通信”

- 端系统之间的通信方式通常可划分为两大类：
	- 客户-服务器方式（C/S 方式） 即 Client/Server 方式，简称为 C/S 方式。
	- 对等方式（P2P 方式） 即 Peer to Peer 方式 ，简称为 P2P 方式。
#### 客户-服务器方式（C/S 方式）
- 客户 (client) 和服务器 (server) 都是指通信中 所涉及的两个应用进程。
- 客户-服务器方式所描述的是进程之间服务和被 服务的关系。 
- 客户是服务的请求方，服务器是服务的提供方。
- **服务请求方和服务提供方都要使用网络核心部分所提供的服务。**

##### 客户软件的特点
被用户调用后运行，在打算通信时主动向远地 服务器发起通信（请求服务）。**因此，客户程序必须知道服务器程序的地址。** 不需要特殊的硬件和很复杂的操作系统。
##### 服务器软件的特点
一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。
**系统启动后即自动调用并一直不断地运行着， 被动地等待并接受来自各地的客户的通信请求。 因此，服务器程序不需要知道客户程序的地址。** 一般需要强大的硬件和高级的操作系统支持。 

> **客户与服务器的通信关系建立后，通信可以是双向的，客户和服务器都可发送和接收数据**


#### 对等方式（P2P 方式）

- 对等连接 (peer-to-peer，简写为 P2P) 是指两 个主机在通信时并不区分哪一个是服务请求方还是服务提供方。
- 只要两个主机都运行了对等连接软件 (P2P 软 件) ，它们就可以进行平等的、对等连接通信。
- 双方都可以下载对方已经存储在硬盘中的共享文档
##### 对等连接方式的特点
对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机既是客户又是服务器。 **对等连接工作方式可支持大量对等用户（如上百万个）同时工作。**

### 1.1.2 互联网的核心部分
#### 网络核心
- 目标：将海量的端系统互联起来
- 由各类交换机（路由器）和链路，构成的网状网络
- 在网络核心部分起特殊作用的是路由器 (router)。
	- 路由器是实现分组交换 (packet switching) 的 关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。

#### 分组交换（也称包交换）
- 主机将数据分成分组，发送到网络
- 网络将数据分组从一个路由器转发到下一个路由器，通过从源到目标的路径上的链路，逐跳传输抵达目的地

交换技术
#### 电路交换(circuit switching)
- 电话机

$N$ 部电话机两两直接相连，需 $N(N – 1)/2$ 对电 线。这种直接连接方法所需要的电线对的数量与电话机数量的平方$N^2$ 成正比

- 交换机
- 每一部电话都直接连接到交 换机上，而交换机使用交换的方法，让电话用户彼此之间可以很方便地通信。所采用的交换方式就是**电路交换 (circuit switching)**。
	- “交换”(switching)的含义就是转接 —— 把一条电话线转接到另一条电话线，使它们连通起来。
	- 从通信资源的分配角度来看，“交换”就是按照某种方式动态地分配传输线路的资源。
	- 如果通信资源不足，主叫用户会听到忙音，表示电信网不接受用户的呼叫，需等待一段时间后再拨


> 电路交换传送计算机数据效率低
> - 计算机数据具有突发性(Burst)
> 	- 数据传输的不确定性（时间和数据大小）
> - 导致通信线路的利用率很低
> 	- 在通话的全部时间，通话的两个用户始终占据端到端的固定传输带宽。用来传送数据的时间往往不到10%甚至1%

***
***

#### 分组交换
- **分组**
- **存储转发**
- 分组交换则采用存储转发技术。
- 在发送端，先把较长的报文划分成较短的、固定长度的数据段

##### 添加首部构成分组
每一个数据段前面添加上首部构成**分组(packet)**。
##### 分组交换的传输单元
分组交换网以“分组”（也称为“包”，首部也可称为“包头”）作为数据传输单元。依次把各分组发送到接收端（假定接收端在左边）
##### 收到分组后剥去首部
接收端收到分组后剥去首部还原成报文

> 这里我们假定分组在传输过程中没有出现差错， 在转发时也没有被丢弃。

***
##### 分组首部的重要性
- 每一个分组的首部都含有地址（诸如目的地址和源地址）等控制信息。
- 分组交换网中的结点交换机根据收到的分组首部中的地址信息，把分组转发到下一个结点交换机。
- 每个分组在互联网中独立地选择传输路径。
- 用这样的存储转发方式，最后分组就能到达最终目的地

##### 路由器
路由算法：**转发表**
- 在路由器中的输入和输出端口之间*没有直接连线*。
- 路由器处理分组的过程是：
	- 把收到的分组先**放入缓存（暂时存储）**
	- **查找转发表**，找出到某个目的地址应从哪个端 口转发
	- 把分组送到适当的端口**转发**出去。

#### 分组交换的优点
- 高效 在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用。 
- 灵活 为每一个分组独立地选择最合适的转发路由。 
- 迅速 以分组作为传送单位，可以不先建立连接就能向其他主机发送分组。
- 可靠 保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性。

#### 分组交换的缺点
- 分组在各结点存储转发时需要排队，这就会造成一定的时延。
- 分组必须携带的首部（里面有必不可少的控制 信息）也造成了一定的开销（overhead）。
- 分组在传输过程中可能出现差错， 在转发时可能被丢弃。


***

#### 报文交换
***

#### 三种交换的比较

![三种交换比较](img/第一章%20概述/三种交换比较.png)

- 若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。
- 报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用 率。
- 由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性

***

- *互联网的核心部分*是由许多网络和把它们互连起来的*路由器*组成，而*主机*处在*互联网的边缘部分*。
- 互联网核心部分中的路由器之间一般都用高速链路相连接，而在网络边缘的主机接入到核心部分则通常以*相对较低速率*的链路相连接。
- 主机的用途是为用户进行信息处理的，并且可以和其他主机通过网络交换信息。*路由器*的用途则是用来*转发分组*的，即进行分组交换的。

***
***

## 1.5 计算机网络的类别

## 1.6 计算机网络的性能
### 1.6.1 计算机网络的性能指标
1. [[#速率]]
2. [[#带宽]]
3. [[#吞吐量]]
4. [[#时延]]
5. [[#时延带宽积]]

#### 速率
- 计算式要注意**单位换算**
	- 速率： $^3$
	- 内存： $^{10}$
- $1B=8bit$

#### 带宽
- 两种含义
	1. 信号具有的频带宽度
	2. 最高数据率 [bit/s]

#### 吞吐量
- 实际数据量

#### 时延
- 发送时延
	- $发送时延 = \frac{数据帧长度（bit）}{发送速率（bit/s）}$
- 传播时延
	- $传播时延 = \frac{信道长度（m）}{信号在信道上的传播速率（m/s）}$
- 处理时延
- 排队时延

#### 时延带宽积
- $时延带宽积 = 传播时延 \times 带宽$

#### 往返时间RTT
- 往返时间表示从发送方发送数据开始，到发送方收到来自接收方的确认，总共经历的时间
- $有效数据率 = \frac{数据长度}{发送时间 + 𝑅𝑇𝑇}$

#### 利用率
- 信道利用率并非越高越好
- 当信道的利用率增大时，该信道引起的时延迅速增加
- 令 $D_0$ 表示网络空闲时的时延，$D$ 表示网络当前的时延：$$D= \frac{D_0}{1-U}$$
- U 是网络的利用率，数值在 0 到 1 之间

## 1.4 计算机网络的体系结构
- 分层
- 开放系统互连参考模型 OSI/RM (Open Systems Interconnection Reference Model)
- 法律上的 (de jure) 国际标准 OSI 并没有得到市场的认可。
- 非国际标准 TCP/IP 却获得了最广泛的应用。TCP/IP 常被称为事实上的 (de facto) 国际标准。

| OSI        | TCP/IP协议                        |
| ---------- | --------------------------------- |
| 应用层     | 应用层                            |
| 表示层     |                                   |
| 会话层     |                                   |
| 传输层     | 传输层                            |
| 网络层     | 网际层                            |
| 数据链路层 |                                   |
| 物理层     | 网络接口层 （数据链路层、物理层） |


